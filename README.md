# Modern Audio Gallery (AudioFrame)

A modern, minimalist, single-page picture gallery web application with synchronized audio for each group of pictures. Designed for a seamless, immersive viewing experience with robust preloading and cross-browser compatibility.

## Table of Contents

1. [Project Overview](#1-project-overview)
2. [Main Features](#2-main-features)
3. [Security Features](#3-security-features)
4. [Cross-Browser Compatibility](#4-cross-browser-compatibility)
5. [Responsive Design](#5-responsive-design)
6. [Installation & Setup](#6-installation--setup)
7. [Development Workflow](#7-development-workflow)
8. [Future Features Backlog](#8-future-features-backlog)
9. [Limitations](#9-limitations)
10. [Credits](#10-credits)
11. [License](#11-license)

---

## 1. Project Overview

**AudioFrame** is an audio-synchronized picture gallery designed to present collections of images where each collection (group) is accompanied by a specific looping soundtrack. It prioritizes a fast, smooth, and preloaded browsing experience, making it ideal for:

-   **Art Galleries & Exhibitions**: Digital displays of artwork with ambient sound.
-   **Portfolios**: Photographers or designers showcasing themed work.
-   **Storytelling**: Visual narratives enhanced by audio atmosphere.
-   **Personal Projects**: Curated collections of memories.

---

## 2. Main Features

### Core Functionality
-   **Grouped Image Gallery**: Images are organized into groups.
-   **Looping Audio**: Each group has a dedicated audio track that loops seamlessly.
-   **Auto-Generated Configuration**: The gallery configuration is automatically generated by scanning the `assets/groups/` folder structure, eliminating manual config maintenance.
-   **Smart Preloading**:
    -   Preloads all images and audio for the **current group**.
    -   Background preloads the **next group** to ensure instant transitions.
-   **Real-Time Navigation**: Single-page application (SPA) architecture ensures no page refreshes during navigation.
-   **Seamless Audio**: Audio continues playing uninterrupted while navigating between images within the same group, and crossfades/switches cleanly when changing groups.

### UI & Navigation
-   **Intuitive Controls**: Simple "Previous" and "Next" buttons.
-   **Touch & Gesture Navigation**:
    -   **Swipe Left/Right**: Navigate between images.
    -   **Tap**: Toggle UI visibility (immersive mode).
    -   **Long Press**: Pause/Resume audio.
-   **Responsive Design**: Fully functional on Desktop, Tablet, and Mobile devices.
-   **Minimalist Aesthetic**: Clean interface on a black background to focus attention on the content.

### Performance
-   **AssetLoader**: A dedicated system for intelligent asset fetching.
-   **Caching**: Loaded assets are cached to prevent redundant network requests.
-   **Optimized Loading**: Critical assets are loaded before the initial render to prevent layout shifts or "pop-in".

### Folder-Based Configuration
-   **Structure**: One folder per group under `assets/groups/`.
-   **Content**: Each folder contains images (`.jpg`, `.png`) and an audio file (`.ogg`, `.mp3`).
-   **Automation**: A Node.js script scans these folders and generates `js/generatedConfig.js`.

### Architecture

The project follows a clean, modular vanilla JavaScript architecture:

-   **`index.html`**: The main entry point and DOM structure.
-   **`styles.css`**: All styling, including responsive layouts and animations.
-   **`js/main.js`**: Application entry point, wiring up components and DOM events.
-   **`js/gallery.js`**: Manages gallery state, navigation logic, and slide transitions.
-   **`js/audioPlayer.js`**: Handles audio playback, volume, looping, and track switching.
-   **`js/assetLoader.js`**: Manages preloading and caching of images and audio.
-   **`js/touchControls.js`**: Handles touch gestures (swipe, tap, long-press).
-   **`js/browserCompatibility.js`**: Detects browser features and sets the runtime mode.
-   **`js/generatedConfig.js`**: Auto-generated file containing the gallery structure (DO NOT EDIT).
-   **`scripts/generateGalleryConfig.mjs`**: Node.js script to generate the config.

---

## 3. Security Features

While client-side protection is never absolute, this project implements "best-effort" hardening:

-   **Content Security Policy (CSP)**: Strict CSP in `<meta>` tag restricts sources to `'self'` and specific safe origins, preventing XSS attacks.
-   **No Inline Execution**: Relies on external scripts; `eval()` and `new Function()` are avoided (except for controlled compatibility checks).
-   **Content Protection**:
    -   Right-click context menu disabled on images.
    -   Drag-and-drop disabled on images.
    -   CSS `user-select: none` to prevent highlighting.
    -   iOS long-press menu disabled.
-   **Sanitization**: Uses `textContent` instead of `innerHTML` when updating dynamic text to prevent injection.

> **Note**: Complete protection against downloading images requires server-side authentication and tokenized URLs.

---

## 4. Cross-Browser Compatibility

The application includes an automatic runtime compatibility system:

-   **Modern Mode**: Full feature set. Uses ES6+ features (Promises, Fetch, Modules, Arrow Functions). Supported by Chrome, Firefox, Safari, Edge (latest versions).
-   **Fallback Mode**: For browsers missing minor features.
-   **Degraded Mode**: For legacy browsers (e.g., older IE). Displays a prominent warning banner advising the user to upgrade, as core features like `fetch` or `Promise` may be missing.

**Detection**: `js/browserCompatibility.js` runs immediately on load to detect capabilities and injects a warning banner if necessary.

---

## 5. Responsive Design

-   **Mobile-First**: Layout is optimized for small screens and scales up.
-   **Adaptive Layout**:
    -   **Mobile**: Vertical stack, maximized image area, touch-friendly buttons.
    -   **Tablet**: Adjusted spacing and sizing.
    -   **Desktop**: Centered layout with max-width constraints for optimal viewing.
-   **Touch Interactions**: Full swipe and tap support makes the mobile experience feel native.

---

## 6. Installation & Setup

### Prerequisites
-   **Node.js** (for config generation)
-   A simple **static web server** (e.g., VS Code Live Server, Python `http.server`, or `serve`). *Direct file access (`file://`) may block audio autoplay due to browser security policies.*

### Step-by-Step

1.  **Clone/Download** the repository.
2.  **Organize Assets**:
    Place your content in the `assets/groups/` directory:
    ```
    assets/
    └── groups/
        ├── group1/
        │   ├── image1.jpg
        │   ├── image2.jpg
        │   └── ambient.ogg
        └── group2/
            ├── photo_a.jpg
            └── sound.mp3
    ```
3.  **Generate Configuration**:
    Run the generation script to create `js/generatedConfig.js`:
    ```bash
    node scripts/generateGalleryConfig.mjs
    ```
4.  **Run the Application**:
    Start your local static server pointing to the project root and open `index.html`.

---

## 7. Development Workflow

1.  **Modify Code**: Edit files in `js/` or `styles.css`.
2.  **Update Assets**: Add/remove files in `assets/groups/`.
3.  **Regenerate Config**: Always run `node scripts/generateGalleryConfig.mjs` after changing assets.
4.  **Test**:
    -   **Modern**: Use Chrome/Edge/Firefox.
    -   **Mobile**: Use Chrome DevTools Device Mode to test touch gestures.
    -   **Compatibility**: Test degraded mode by simulating missing features or using older browsers.

---

## 8. Future Features Backlog

See `BACKLOG.md` for the complete list. Key items include:

### Implemented Features
-   [x] **Feature 1 – Touch & Gesture Navigation**: Swipe, tap, and long-press support.

### Backlog
-   **Feature 4 – Fullscreen Mode**: Toggle button for immersive view.
-   **Feature 6 – Smart Lazy Loading**: "Just-in-time" loading for very large galleries.
-   **Feature 9 – Desktop Hotkeys**: Keyboard shortcuts (Arrows, Space, M, F).
-   **Feature 12 – Transitions & Effects**: Smooth fades/slides (Modern mode only).
-   **Feature 13 – Metadata Support**: Display titles, descriptions, and tags per image/group.
-   **Feature 14 – Asset Pipeline**: Auto-compression and normalization of media.

---

## 9. Limitations

-   **Client-Side Protection**: It is impossible to fully prevent determined users from downloading images that are displayed in the browser.
-   **Autoplay Policies**: Modern browsers may block audio autoplay until the user interacts with the page (click/tap). The "Click to Enter" overlay handles this.
-   **Memory**: Very large galleries (hundreds of high-res images) may impact performance on low-end mobile devices without the "Smart Lazy Loading" feature.

---

## 10. Credits

-   **Developer**: Antigravity (Google DeepMind)
-   **Concept**: Modern Audio Gallery

---

## 11. License

This project is licensed under the MIT License.